<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>DeepSeek Random Text</title>
<style>
  body { font-family: Arial; margin: 40px; }
  button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
  pre { background: #f4f4f4; padding: 10px; margin-top: 20px; }
</style>
</head>
<body>

<h2>توليد نص عشوائي مباشر</h2>
<button id="generateBtn">توليد نص</button>
<pre id="output">النص سيظهر هنا بعد الضغط على الزر</pre>

<script>
const btn = document.getElementById("generateBtn");
const output = document.getElementById("output");

btn.onclick = async () => {
  output.textContent = "جارٍ توليد النص...";

  // استدعاء الـ GitHub Action
  await fetch(
    "https://api.github.com/repos/<USERNAME>/<REPO>/actions/workflows/generate.yml/dispatches",
    {
      method: "POST",
      headers: {
        "Accept": "application/vnd.github+json",
        "Authorization": "token <PERSONAL_ACCESS_TOKEN>"
      },
      body: JSON.stringify({
        ref: "main",
        inputs: { prompt: "Generate a short random text" }
      })
    }
  );

  // بعد ثوانٍ، قراءة الملف الذي حفظه Action
  const wait = ms => new Promise(res => setTimeout(res, ms));
  await wait(5000); // انتظر 5 ثوانٍ حتى يتم Commit

  const jsonResponse = await fetch(
    "https://raw.githubusercontent.com/<USERNAME>/<REPO>/main/random_text.json"
  );
  const data = await jsonResponse.json();
  output.textContent = data.text;
};
</script>

</body>
</html>
