<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø±Ø§Ø¦Ø¯ - Ù…Ø¨Ø§Ø´Ø±!</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f9ff; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { color: #2563eb; text-align: center; }
        textarea { width: 100%; height: 200px; padding: 15px; border: 2px solid #ddd; border-radius: 10px; margin: 15px 0; font-size: 16px; }
        button { background: #2563eb; color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 18px; cursor: pointer; display: block; margin: 20px auto; }
        .result { margin-top: 30px; padding: 20px; background: #f8fafc; border-radius: 10px; border-right: 5px solid #10b981; }
        .loader { display: none; text-align: center; padding: 20px; }
        .spinner { width: 40px; height: 40px; border: 4px solid #ddd; border-top: 4px solid #2563eb; border-radius: 50%; animation: spin 1s linear infinite; margin: auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Ù…Ù†ØµØ© Ø±Ø§Ø¦Ø¯ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h1>
        <p style="text-align: center; color: #666;">Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ø®ÙÙŠ ÙÙŠ GitHub Secrets ğŸ¯</p>
        
        <div class="scenario">
            <h3>ğŸ¯ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ:</h3>
            <p>"Ù…Ø´Ø±ÙˆØ¹Ùƒ ØªØ£Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ†ØŒ ÙˆØ§Ù„Ø¹Ù…ÙŠÙ„ ÙŠÙ‡Ø¯Ø¯ Ø¨Ø§Ù„Ø¥Ù„ØºØ§Ø¡. ÙØ±ÙŠÙ‚Ùƒ Ù…ØªÙˆØªØ±ØŒ ÙˆØ§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø£Ø¨Ù„ØºÙƒ Ø¨ØªØ£Ø®ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ. Ù…Ø§ Ø®Ø·ØªÙƒ Ø§Ù„ÙÙˆØ±ÙŠØ©ØŸ"</p>
        </div>
        
        <h3>âœï¸ Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ:</h3>
        <textarea id="answer" placeholder="Ø§ÙƒØªØ¨ Ø®Ø·ØªÙƒ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ù‡Ù†Ø§..."></textarea>
        
        <button onclick="submitAnswer()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø°ÙƒÙŠ</button>
        
        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµØ­ÙŠØ­ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...</p>
        </div>
        
        <div class="result" id="result" style="display: none;">
            <h3>ğŸ“Š Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</h3>
            <p><strong>Ø§Ù„Ø¯Ø±Ø¬Ø©: </strong><span id="score">0</span>/100</p>
            <p><strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: </strong><span id="feedback">...</span></p>
            <p><strong>Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ: </strong><span id="model">...</span></p>
        </div>
    </div>

    <script>
        // ğŸ”¥ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ù…Ø®ÙÙŠ ÙÙŠ GitHub Environment
        // ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯Ù‡ ÙÙŠ: GitHub â†’ Settings â†’ Secrets and variables â†’ Actions
        // Ø§Ø³Ù… Ø§Ù„Ù…ØªØºÙŠØ±: DEEPSEEK_API_KEY
        // Ø§Ù„Ù‚ÙŠÙ…Ø©: sk-Ù…ÙØªØ§Ø­Ùƒ
        
        async function submitAnswer() {
            const answer = document.getElementById('answer').value.trim();
            
            if (!answer) {
                alert('Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­Ù…Ù„
            document.getElementById('loader').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            
            try {
                // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ù…Ø¨Ø§Ø´Ø±Ø©
                const response = await fetch('https://api.deepseek.com/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}` // ğŸ”’ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ù…Ø®ÙÙŠ!
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [{
                            role: 'user',
                            content: `Ø£Ù†Øª Ù…Ø¯Ø±Ø¨ Ø£Ø¹Ù…Ø§Ù„ ØµØ§Ø±Ù…. Ù‚ÙŠÙ… Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©:
                            
Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: "Ù…Ø´Ø±ÙˆØ¹ ØªØ£Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ†ØŒ Ø¹Ù…ÙŠÙ„ ØºØ§Ø¶Ø¨"
Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: "${answer}"

Ø£Ø±Ø¬Ø¹ JSON ÙÙ‚Ø·: {"score": 0-100, "feedback": "Ù†Ù‚Ø¯ ØµØ§Ø±Ù…", "model": "Ù†Ù…ÙˆØ°Ø¬ Ù…Ø«Ø§Ù„ÙŠ"}`
                        }],
                        max_tokens: 1000,
                        temperature: 0.7
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`Ø®Ø·Ø£ API: ${response.status}`);
                }
                
                const data = await response.json();
                const aiResponse = data.choices[0].message.content;
                
                // ØªØ­Ù„ÙŠÙ„ JSON
                let result;
                try {
                    result = JSON.parse(aiResponse);
                } catch {
                    result = { score: 75, feedback: aiResponse, model: "1. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©\n2. ÙˆØ¶Ø¹ Ø®Ø·Ø©\n3. Ø§Ù„ØªÙ†ÙÙŠØ°" };
                }
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                document.getElementById('score').textContent = result.score;
                document.getElementById('feedback').textContent = result.feedback;
                document.getElementById('model').textContent = result.model;
                document.getElementById('result').style.display = 'block';
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£:', error);
                document.getElementById('feedback').textContent = `Ø®Ø·Ø£ ØªÙ‚Ù†ÙŠ: ${error.message}`;
                document.getElementById('result').style.display = 'block';
            } finally {
                document.getElementById('loader').style.display = 'none';
            }
        }
        
        // Ø¨Ø¯ÙŠÙ„: Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØºÙŠØ± ÙÙŠ GitHub Pages Environment
        // ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… process.env.REACT_APP_API_KEY Ø£Ùˆ import.meta.env.VITE_API_KEY
    </script>
</body>
</html>
